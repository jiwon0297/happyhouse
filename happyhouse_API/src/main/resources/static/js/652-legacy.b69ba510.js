"use strict";(self["webpackChunkhappyhouse"]=self["webpackChunkhappyhouse"]||[]).push([[652],{94652:function(t,e,i){i.r(e),i.d(e,{default:function(){return x}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[i("h2",{staticStyle:{"text-align":"center","font-family":"'GowunDodum-Regular'"}},[t._v(" 커뮤니티 글 ")]),i("hr"),i("div",{staticStyle:{"text-align":"left"}},[i("md-button",{staticClass:"md-success md-simple",staticStyle:{border:"1px solid","text-align":"left"},attrs:{variant:"success"},on:{click:t.listArticle}},[t._v("목록")])],1)]),i("div",{staticStyle:{width:"100%"},attrs:{id:"nav-tabs"}},[i("div",{staticClass:"md-layout"},[i("div",{staticClass:"md-layout-item md-size-100"},[i("nav-tabs-card",{attrs:{"no-label":""}},[i("template",{slot:"content"},[i("h3",{staticStyle:{color:"black","font-weight":"bold","font-family":"'GowunDodum-Regular'"}},[t._v(" "+t._s(t.article.subject)+" ")]),i("p",{staticStyle:{color:"gray","text-align":"right"}},[t._v(" "+t._s(t.article.userid)+" "+t._s(t.article.regtime)+" ")]),i("hr"),i("p",{staticStyle:{"font-size":"15pt"}},[t._v(t._s(t.article.content))]),t.article.savefile?i("div",{staticStyle:{width:"50%",margin:"auto"}},[i("img",{attrs:{src:t.article.savefile}})]):t._e()])],2)],1)])]),i("div",[i("div",{staticStyle:{"text-align":"center"}},[t.userInfo.userid===t.article.userid?i("md-button",{staticClass:"md-default md-simple",staticStyle:{border:"1px solid","margin-right":"1rem"},attrs:{variant:"default"},on:{click:t.moveModifyArticle}},[t._v(" 수정 ")]):t._e(),t.userInfo.userid===t.article.userid?i("md-button",{staticClass:"md-danger md-simple",staticStyle:{border:"1px solid"},attrs:{variant:"danger"},on:{click:t.deleteArticle}},[t._v(" 삭제 ")]):t._e()],1)]),i("hr"),t.comments.length?i("div",{staticClass:"md-layout",staticStyle:{width:"100%","text-align":"center"}},[i("p",{staticStyle:{"margin-left":"20px"}},[t._v("댓글("+t._s(t.commentNum)+")")]),i("comments-list",{attrs:{comments:t.comments},on:{upup:t.getUpdate,commentmodify:t.modifycom}})],1):i("div",{staticClass:"md-layout",staticStyle:{width:"100%"}},[i("div",{staticClass:"md-layout-item md-size-100"},[i("p",{staticStyle:{"margin-left":"10px","text-align":"left"}},[t._v(" 댓글("+t._s(t.commentNum)+") ")]),i("div",{staticClass:"md-layout-item md-size-100",staticStyle:{"text-align":"center"}},[t._v(" 작성된 댓글이 없습니다. ")])])]),t.isUpdate?t._e():i("div",{staticClass:"md-layout"},[i("div",{staticClass:"md-layout-item md-size-100"},[i("form",{on:{submit:t.onSubmit}},[i("md-field",[i("md-input",{attrs:{id:"userid",type:"hidden",required:"",disabled:"",placeholder:"작성자"},model:{value:t.comment.userid,callback:function(e){t.$set(t.comment,"userid",e)},expression:"comment.userid"}})],1),i("div",{staticStyle:{display:"flex"}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment.comment,expression:"comment.comment"}],staticStyle:{"border-color":"lightgray",margin:"auto","border-radius":"5px",width:"85%"},attrs:{id:"comment",rows:"3",required:"",placeholder:"댓글을 입력하세요."},domProps:{value:t.comment.comment},on:{input:function(e){e.target.composing||t.$set(t.comment,"comment",e.target.value)}}}),i("md-button",{staticClass:"md-default md-simple",staticStyle:{border:"1px solid",float:"right",margin:"auto"},attrs:{type:"submit",variant:"default"}},[t._v("작성")])],1)],1)])]),t.isUpdate?i("div",{staticClass:"md-layout"},[i("div",{staticClass:"md-layout-item md-size-100"},[i("form",{on:{submit:t.modySubmit}},[i("md-field"),i("div",{staticStyle:{display:"flex"}},[i("div",{staticStyle:{margin:"auto",width:"85%"}},[i("textarea",{staticStyle:{"border-color":"lightgray","border-radius":"5px",width:"100%"},attrs:{id:"comment",rows:"3",required:""},domProps:{value:t.modcomment.comment},on:{input:t.changecomment}})]),i("div",{staticStyle:{float:"right",width:"10%",margin:"0 7px 5px 0"}},[i("md-button",{staticClass:"md-success md-simple md-sm",staticStyle:{border:"1px solid"},attrs:{type:"submit",variant:"success"}},[t._v("수정")]),i("md-button",{staticClass:"md-default md-simple md-sm",staticStyle:{border:"1px solid"},attrs:{type:"button",variant:"default"},on:{click:t.changeupdate}},[t._v("취소")])],1)])],1)])]):t._e()])},n=[],s=i(4367),m=(i(9653),i(69600),i(74916),i(23123),i(15306),i(75748)),o=i(80480),r=i(34665),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"md-layout-item md-size-100",staticStyle:{"text-align":"center"}},[t._l(t.paginatedData,(function(e){return i("md-table",{key:e.commentno,staticStyle:{"text-align":"center"}},[i("tr",[i("td",{staticStyle:{"text-align":"left","padding-left":"10px","font-weight":"bold"},attrs:{width:"10%"}},[t._v(" "+t._s(e.userid)+" ")]),i("td",{staticStyle:{"text-align":"left"},attrs:{width:"65%"}},[t._v(t._s(e.comment))]),i("td",{staticStyle:{"font-size":"80%",color:"gray"},attrs:{width:"25"}},[t._v(" "+t._s(t._f("dateFormat")(e.regtime))+" ")]),i("td",{staticStyle:{"text-align":"right"},attrs:{width:"5%"}},[e.userid===t.userInfo.userid?i("button",{staticStyle:{"border-style":"none","background-color":"transparent"},on:{click:function(i){return t.commentedit(e)}}},[i("i",{staticClass:"md-icon md-icon-font md-theme-default"},[t._v("edit")])]):t._e()]),i("td",{staticStyle:{"text-align":"right"},attrs:{width:"5%"}},[e.userid===t.userInfo.userid?i("button",{staticStyle:{"border-style":"none","background-color":"transparent"},on:{click:function(i){return t.deleteComment(e)}}},[i("i",{staticClass:"md-icon md-icon-font md-theme-default"},[t._v("delete")])]):t._e()])])])})),t.comments.length?i("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[i("md-button",{staticClass:"md-default md-simple md-sm",staticStyle:{"margin-top":"-3px",border:"1px solid lightgray"},attrs:{disabled:0===t.pageNum},on:{click:t.prevPage}},[t._v(" Prev ")]),i("span",{staticStyle:{"margin-left":"5px","margin-right":"10px"}},[t._v(" "+t._s(t.pageNum+1)+" / "+t._s(t.pageCount))]),i("md-button",{staticClass:"md-default md-simple md-sm",staticStyle:{"margin-top":"-3px",border:"1px solid lightgray"},attrs:{disabled:t.pageNum>=t.pageCount-1},on:{click:t.nextPage}},[t._v(" Next ")])],1):t._e()],2)},l=[],d=(i(47042),i(17133)),u=i.n(d),p={name:"CommentsList",data:function(){return{pageNum:0,isUpdate:!1}},props:{comments:[],pageSize:{type:Number,required:!1,default:5}},methods:{nextPage:function(){this.pageNum+=1},prevPage:function(){this.pageNum-=1},deleteComment:function(t){var e=this;confirm("정말로 삭제하시겠습니까?")&&m.Z["delete"]("/comments/"+t.commentno).then((function(i){var a=i.data,n="삭제 처리시 문제가 발생했습니다.";"success"===a&&(n="삭제가 완료되었습니다."),alert(n),e.$router.go({name:"CommDetail",params:{articleno:t.articleno}})}))},editComment:function(){var t=this;m.Z.put("/comments/"+this.commetno,{commentno:this.commentno,userid:this.userid,comment:this.comment,regtime:this.regtime,articleno:this.articleno}).then((function(e){var i=e.data;if("success"===i){var a="정보가 수정되었습니다. 다시 로그인해주세요.";alert(a),t.$router.push({name:"comment"})}else{var n="등록 처리시 문제가 발생했습니다.";alert(n)}}))},commentedit:function(t){this.isUpdate=!0,this.$emit("upup",this.isUpdate),this.$emit("commentmodify",t)}},computed:(0,s.Z)((0,s.Z)({},(0,r.rn)(["isLogin","userInfo"])),{},{pageCount:function(){var t=this.comments.length,e=this.pageSize,i=Math.floor(t/e);return t%e>0&&(i+=1),i},paginatedData:function(){var t=this.pageNum*this.pageSize,e=t+this.pageSize;return this.comments.slice(t,e)}}),filters:{dateFormat:function(t){return u()(new Date(t)).format("YYYY.MM.DD HH:mm")}}},h=p,f=i(1001),g=(0,f.Z)(h,c,l,!1,null,null,null),v=g.exports,y={name:"CommDetail",data:function(){return{article:{},comment:{},comments:[],commentNum:Number,modcomment:{},isUpdate:!1,newcomment:String}},props:{type:{type:String}},components:{NavTabsCard:o.ZN,CommentsList:v},computed:(0,s.Z)((0,s.Z)({},(0,r.rn)(["isLogin","userInfo"])),{},{message:function(){return this.article.content?this.article.content.split("\n").join("<br>"):""}}),created:function(){var t=this;this.comment.userid=this.userInfo.userid,m.Z.get("/commboard/".concat(this.$route.params.articleno)).then((function(e){var i=e.data;t.article=i})),m.Z.get("/comments/".concat(this.$route.params.articleno)).then((function(e){var i=e.data;t.comments=i})),m.Z.get("/comments/count/".concat(this.$route.params.articleno)).then((function(e){var i=e.data;t.commentNum=i}))},methods:{listArticle:function(){this.$router.push({name:"CommHome"})},moveModifyArticle:function(){this.$router.replace({name:"CommModify",params:{articleno:this.article.articleno}})},deleteArticle:function(){confirm("정말로 삭제하시겠습니까?")&&this.$router.replace({name:"CommDelete",params:{articleno:this.article.articleno}})},onSubmit:function(t){t.preventDefault(),this.registComment()},changecomment:function(t){t.preventDefault(),this.newcomment=t.target.value},modySubmit:function(t){t.preventDefault(),this.modifyComment()},modifyComment:function(){var t=this;m.Z.put("/comments/"+this.modcomment.commentno,{commentno:this.modcomment.commentno,comment:this.newcomment}).then((function(e){var i=e.data,a="등록 처리시 문제가 발생했습니다.";"success"===i&&(a="수정이 완료되었습니다.",t.$router.go(0)),alert(a)}))},registComment:function(){var t=this;m.Z.post("/comments",{articleno:this.article.articleno,userid:this.comment.userid,comment:this.comment.comment}).then((function(e){var i=e.data,a="등록 처리시 문제가 발생했습니다.";"success"===i&&(a="등록이 완료되었습니다.",t.$router.go(0)),alert(a)}))},getUpdate:function(t){this.isUpdate=t},modifycom:function(t){this.modcomment=t},changeupdate:function(){this.isUpdate=!1}}},b=y,S=(0,f.Z)(b,a,n,!1,null,null,null),x=S.exports}}]);
//# sourceMappingURL=652-legacy.b69ba510.js.map